file.onchange = () => {
  const f = file.files[0];

  // Cancelou a câmera
  if (!f) {
    resetar();
    return;
  }

  // Agora sim mostramos o formulário
  form.classList.remove("hidden");

  if (f.size > 30 * 1024 * 1024) {
    alert("O arquivo deve ter no máximo 30MB.");
    resetar();
    return;
  }

  preview.innerHTML = "";
  let media;

  if (f.type.startsWith("image")) {
    media = document.createElement("img");
    media.src = URL.createObjectURL(f);
  } else {
    media = document.createElement("video");
    media.src = URL.createObjectURL(f);
    media.controls = true;
  }

  preview.appendChild(media);
  preview.classList.remove("hidden");
  actions.classList.remove("hidden");
};
